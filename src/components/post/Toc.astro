---
import type { MarkdownHeading } from 'astro';

export interface Props {
  headings: MarkdownHeading[];
}

const { headings } = Astro.props;

// 为了保持目录的简洁，我们只显示 h2 和 h3 标题
const filteredHeadings = headings.filter(h => h.depth > 1 && h.depth < 4);
---

{filteredHeadings.length > 0 && (
  <aside class="hidden lg:block w-36 flex-shrink-0 sticky top-24">
    <nav>
      <h2 class="text-lg font-bold mb-4 tracking-wider uppercase text-gray-700 dark:text-gray-300">
        目录
      </h2>
      <ul class="space-y-2">
        {filteredHeadings.map(heading => (
          <li class:list={[
            "text-sm",
            {
              'pl-4': heading.depth === 3, // h3 标题缩进
              'font-semibold': heading.depth === 2, // h2 标题加粗
            }
          ]}>
            <a 
              class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-100"
              href={`#${heading.slug}`}
            >
              {heading.text}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  </aside>
)}
