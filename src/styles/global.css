
@import "tailwindcss";
@plugin '@tailwindcss/typography';
@import "./callout.css";
@import "./gcard.css";
@import "./aplayer.css";	

/* 禁用移动端不必要的触摸行为 */
html, body {
	/* 禁用橡皮筋效果（iOS Safari 中的弹性滚动） */
	overscroll-behavior: none;
	/* 禁用触摸时的高亮效果 */
	-webkit-tap-highlight-color: transparent;
	/* 禁用文本选择时的放大镜效果 */
	-webkit-touch-callout: none;
	/* 禁用双击缩放 */
	touch-action: manipulation;
}

/* 禁用所有元素的用户选择和拖拽（可选，根据需要调整） */
* {
	/* 禁用长按时的上下文菜单 */
	-webkit-touch-callout: none;
	/* 禁用文本选择 */
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

/* 允许文章内容和输入框的文本选择 */
article, 
.prose, 
input, 
textarea, 
[contenteditable] {
	-webkit-user-select: text;
	-moz-user-select: text;
	-ms-user-select: text;
	user-select: text;
}

:root {
	/* --primary-hue 由 MainLayout.astro 注入 */

	/* 浅色模式 */
	--page-bg: hsl(var(--primary-hue), 45%, 96%); 
	--sidebar-bg: hsl(var(--primary-hue), 15%, 99.5%); 
	--content-pane-bg: hsl(0, 0%, 100%);
	--text-primary: hsl(var(--primary-hue), 20%, 18%); 
	--text-secondary: hsl(var(--primary-hue), 12%, 42%);
	--text-link: hsl(var(--primary-hue), 75%, 44%);
	--line-divider: hsl(var(--primary-hue), 20%, 88%);
	--tag-bg: hsl(var(--primary-hue), 40%, 92%);

	/* 主题色 */
	--theme-color: hsl(var(--primary-hue), 75%, 44%);
	--theme-color-rgb: var(--primary-hue), 75%, 44%;
	--theme-color-light: hsl(var(--primary-hue), 75%, 65%);

	/* 浮动面板和主题选择器相关颜色 */
	--float-panel-bg: hsl(0, 0%, 100%);
	--color-selection-bar: linear-gradient(to right, oklch(0.80 0.10 0), oklch(0.80 0.10 30), oklch(0.80 0.10 60), oklch(0.80 0.10 90), oklch(0.80 0.10 120), oklch(0.80 0.10 150), oklch(0.80 0.10 180), oklch(0.80 0.10 210), oklch(0.80 0.10 240), oklch(0.80 0.10 270), oklch(0.80 0.10 300), oklch(0.80 0.10 330), oklch(0.80 0.10 360));
	
	/* 侧边栏图标颜色 */
	--sidebar-icon-bg: hsl(var(--primary-hue), 25%, 94%);
	--sidebar-icon-symbol: hsl(var(--primary-hue), 12%, 35%);
}

html.dark {
	/* 深色模式 */
	--page-bg: hsl(var(--primary-hue), 18%, 12%);
	--sidebar-bg: hsl(var(--primary-hue), 16%, 16%);
	--content-pane-bg: hsl(var(--primary-hue), 15%, 20%);
	--text-primary: hsl(var(--primary-hue), 18%, 88%);
	--text-secondary: hsl(var(--primary-hue), 12%, 65%);
	--text-link: hsl(var(--primary-hue), 80%, 75%);
	--line-divider: hsl(var(--primary-hue), 15%, 28%);
	--tag-bg: hsl(var(--primary-hue), 22%, 26%);

	/* 主题色 */
	--theme-color: hsl(var(--primary-hue), 80%, 75%);
	--theme-color-rgb: var(--primary-hue), 80%, 75%;
	--theme-color-light: hsl(var(--primary-hue), 80%, 85%);

	/* 浮动面板和主题选择器相关颜色 */
	--float-panel-bg: hsl(var(--primary-hue), 15%, 20%);
	--color-selection-bar: linear-gradient(to right, oklch(0.70 0.10 0), oklch(0.70 0.10 30), oklch(0.70 0.10 60), oklch(0.70 0.10 90), oklch(0.70 0.10 120), oklch(0.70 0.10 150), oklch(0.70 0.10 180), oklch(0.70 0.10 210), oklch(0.70 0.10 240), oklch(0.70 0.10 270), oklch(0.70 0.10 300), oklch(0.70 0.10 330), oklch(0.70 0.10 360));
	
	/* 侧边栏图标颜色 */
	--sidebar-icon-bg: hsl(var(--primary-hue), 15%, 24%);
	--sidebar-icon-symbol: hsl(var(--primary-hue), 18%, 88%);
}

/* --- Base Styles --- */
html {
	font-family: "Atkinson Hyperlegible", sans-serif;
	scroll-behavior: smooth;
	-webkit-tap-highlight-color: transparent; 
}

body {
	margin: 0;
	background-color: var(--page-bg);
	color: var(--text-primary);
	font-size: 16px;
	line-height: 1.7;
	transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

a {
	color: var(--text-link);
	text-decoration: none;
	transition: color 0.2s ease-in-out;
}

a:hover {
	text-decoration: none;
}

h1, h2, h3, h4, h5, h6 {
	color: var(--text-primary);
	font-weight: 700;
	line-height: 1.3;
}

/* --- Scrollbar --- */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}
::-webkit-scrollbar-track {
	background-color: transparent;
}
::-webkit-scrollbar-thumb {
	border-radius: 10px;
	background-color: hsl(var(--primary-hue), 10%, 75%);
	border: 2px solid transparent;
	background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover {
	background-color: hsl(var(--primary-hue), 15%, 65%);
}
html.dark ::-webkit-scrollbar-thumb {
	background-color: hsl(var(--primary-hue), 10%, 35%);
}
html.dark ::-webkit-scrollbar-thumb:hover {
	background-color: hsl(var(--primary-hue), 15%, 45%);
}

/* --- 主题切换动画 --- */
/* 基础设置：禁用默认动画，确保混合模式正常 */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

/* 向外扩散动画（出现） */
@keyframes reveal {
  from { clip-path: circle(0 at var(--x) var(--y)); }
  to { clip-path: circle(150vmax at var(--x) var(--y)); }
}

/* 向内收缩动画（消失） */
@keyframes conceal {
  from { clip-path: circle(150vmax at var(--x) var(--y)); }
  to { clip-path: circle(0 at var(--x) var(--y)); }
}

/* 切换到深色模式时：新视图(深色)执行“展开”动画 */
html.to-dark::view-transition-new(root) {
  animation: reveal 0.5s ease-out forwards; /* 关键：保持动画结束状态 */
  z-index: 1;
}

/* 切换到浅色模式时：旧视图(深色)执行“收缩”动画 */
html.to-light::view-transition-old(root) {
  animation: conceal 0.5s ease-in forwards; /* 关键：保持动画结束状态 */
  z-index: 1;
}


